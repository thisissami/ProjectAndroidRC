<!-- Â© 2012 Sami Majadla and Rapcities Inc. All Rights Reserved-->

<html>
  <head>
    <title>Rapcities Uploader</title>

    <script type="text/javascript" src="/processing.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
	<style type="text/css">
	#dialogWindow{
		z-index:1;
		position:absolute;
		right:0px;
		top:390px;
	}
	#YouTubeP{
		z-index:1;
	}
	</style>
	<script type="text/javascript">
      $(document).ready(function(){
        var cvs = document.getElementById("canvas");
        var p = new Processing(cvs, 
(function(at){var l=(function(){function bo(){var bq=this;function bs(){at.extendClassChain(bq)}bq.x=0;bq.y=0;bq.hw=0;bq.hh=0;bq.invert=false;bq.pressedHere=false;function bv(){return at.mouseX>bq.x-bq.hw&&at.mouseX<bq.x+bq.hw&&at.mouseY>bq.y-bq.hh&&at.mouseY<bq.y+bq.hh}at.addMethod(bq,"pressed",bv,false);function bw(by,bz){bq.x=by;bq.y=bz}at.addMethod(bq,"newPos",bw,false);function bu(){}at.addMethod(bq,"mousePressed",bu,false);function br(){}at.addMethod(bq,"mouseReleased",br,false);function bt(){}at.addMethod(bq,"draw",bt,false);function bx(bz,bB,by,bA){bs();bq.x=bz;bq.y=bB;bq.hw=by;bq.hh=bA}function bp(){if(arguments.length===4){bx.apply(bq,arguments)}else{bs()}}bp.apply(null,arguments)}return bo})();at.Button=l;var H=(function(){function bo(){var bv=this;function bu(){at.extendClassChain(bv)}bv.NYC=null;bv.miniNYC=null;bv.NYCx=1000;bv.NYCy=711;bv.ox=0;bv.oy=0;bv.ocx=0;bv.ocy=0;bv.allX=0;bv.allY=0;bv.widths=null;bv.heights=null;bv.ominx=0;bv.ominy=0;bv.minix=0;bv.miniy=0;bv.maxix=0;bv.maxiy=0;bv.opressed=false;bv.miniPressed=false;bv.once=false;function bs(){bv.$self.drawMap();bv.$self.drawLocations();bv.$self.drawCurrent();at.fill(0);at.noStroke();at.rectMode(at.CORNERS);bv.$self.drawMini()}at.addMethod(bv,"draw",bs,false);function bq(){at.imageMode(at.CENTER);var bL=0;var bO=0;var bN=0;for(bN=0;bN<4;bN++){bL+=bv.widths[bN];if(bL>a7){break}}var bM=0;for(bM=0;bM<4;bM++){bO+=bv.heights[bM];if(bO>a5){break}}bv.$self.grimage(bM,bN,az/2-(bv.widths[bN]/2-(bL-a7)),aj/2-(bv.heights[bM]/2-(bO-a5)));if(bM>0){bv.$self.grimage(bM-1,bN,az/2-(bv.widths[bN]/2-(bL-a7)),aj/2-bv.heights[bM]-(bv.heights[bM-1]/2-(bO-a5))+1)}if(bN>0){bv.$self.grimage(bM,bN-1,az/2-bv.widths[bN]-(bv.widths[bN-1]/2-(bL-a7))+1,aj/2-(bv.heights[bM]/2-(bO-a5)))}if(bM<3){bv.$self.grimage(bM+1,bN,az/2-(bv.widths[bN]/2-(bL-a7)),aj/2+bv.heights[bM+1]/2+(bO-a5)-1)}if(bN<3){bv.$self.grimage(bM,bN+1,az/2+bv.widths[bN+1]/2+(bL-a7)-1,aj/2-(bv.heights[bM]/2-(bO-a5)))}if(bM>0&&bN>0){bv.$self.grimage(bM-1,bN-1,az/2-bv.widths[bN]-(bv.widths[bN-1]/2-(bL-a7))+1,aj/2-bv.heights[bM]-(bv.heights[bM-1]/2-(bO-a5))+1)}if(bM>0&&bN<3){bv.$self.grimage(bM-1,bN+1,az/2+bv.widths[bN+1]/2+(bL-a7)-1,aj/2-bv.heights[bM]-(bv.heights[bM-1]/2-(bO-a5))+1)}if(bM<3&&bN<3){bv.$self.grimage(bM+1,bN+1,az/2+bv.widths[bN+1]/2+(bL-a7)-1,aj/2+bv.heights[bM+1]/2+(bO-a5)-1)}if(bM<3&&bN>0){bv.$self.grimage(bM+1,bN-1,az/2-bv.widths[bN]-(bv.widths[bN-1]/2-(bL-a7))+1,aj/2+bv.heights[bM+1]/2+(bO-a5)-1)}}at.addMethod(bv,"drawMap",bq,false);function by(bM,bO,bN,bL){if(ap[bM][bO]){if(ap[bM][bO].width>0){at.image(ap[bM][bO],bN,bL)}else{bv.$self.drawLoadingBlock(bM,bO,bN,bL)}}else{if(!ag[bM][bO]){aZ(bM,bO);bv.$self.drawLoadingBlock(bM,bO,bN,bL)}}}at.addMethod(bv,"grimage",by,false);function bC(bM,bO,bN,bL){at.rectMode(at.CENTER);at.noStroke();at.fill(0);at.rect(bN,bL,bv.widths[bM],bv.heights[bO]);at.textSize(30);at.fill(255);at.text("Loading Map Section",bN,bL)}at.addMethod(bv,"drawLoadingBlock",bC,false);function bG(){at.imageMode(at.CORNERS);at.image(bv.miniNYC,ar,v,w,aw);at.rectMode(at.CENTER);at.noFill();at.strokeWeight(1);at.stroke(J[0]);at.rect(ar+an,v+am,aQ,aP);at.ellipseMode(at.CENTER);for(var bL=0;bL<aW.size();bL++){var bM=aW.get(bL);at.fill(aN[bM.type]);at.stroke(aN[bM.type]);if(bM==bi){at.ellipse(at.map(bM.x,531.749,531.749+853,ar,w),at.map(bM.y,231.083,231.083+810,v,aw),5,5)}else{at.ellipse(at.map(bM.x,531.749,531.749+853,ar,w),at.map(bM.y,231.083,231.083+810,v,aw),3,3)}}}at.addMethod(bv,"drawMini",bG,false);function bA(){az=V;aj=a4;aQ=at.map(az,0,bf,0,284);aP=at.map(aj,0,aK,0,270);a7=2500;a5=3000;an=at.map(a7,0,bf,0,284);am=at.map(a5,0,aK,0,270);bv.widths=new Array(1250,1250,1250,1250);bv.heights=new Array(1250,1250,1250,1250);bv.allX=5000;bv.allY=5000;bv.$self.setMins()}at.addMethod(bv,"prep",bA,false);function bx(){if(at.mouseX>ar&&at.mouseY>v&&at.mouseX<w&&at.mouseY<aw){bv.miniPressed=true;an=at.min(at.max(aQ/2,at.mouseX-ar),284-aQ/2);am=at.min(at.max(aP/2,at.mouseY-v),270-aP/2);bv.$self.miniToMaxi()}}at.addMethod(bv,"miniMousePressed",bx,false);function bz(){if(bv.miniPressed){an=at.min(at.max(aQ/2,at.mouseX-ar),284-aQ/2);am=at.min(at.max(aP/2,at.mouseY-v),270-aP/2);bv.$self.miniToMaxi()}}at.addMethod(bv,"miniMouseDragged",bz,false);function bp(){a7=at.map(an,0,284,0,bf);a5=at.map(am,0,270,0,aK);bv.$self.setMins()}at.addMethod(bv,"miniToMaxi",bp,false);function bH(){bv.miniPressed=false}at.addMethod(bv,"miniMouseReleased",bH,false);function bI(){if(at.key==at.CODED){switch(at.keyCode){case (at.UP):am=at.max(am-1,aP/2);bv.$self.miniToMaxi();break;case (at.DOWN):am=at.min(am+1,270-aP/2);bv.$self.miniToMaxi();break;case (at.LEFT):an=at.max(an-1,aQ/2);bv.$self.miniToMaxi();break;case (at.RIGHT):an=at.min(an+1,284-aQ/2);bv.$self.miniToMaxi();break}}}at.addMethod(bv,"keyPressed",bI,false);function bB(){bv.ox=at.mouseX;bv.oy=at.mouseY;bv.ocx=a7;bv.ocy=a5;bv.ominx=F;bv.ominy=D;bv.opressed=true}at.addMethod(bv,"mousePressed",bB,false);function bJ(){if(bv.opressed){a7=bv.ocx-(at.mouseX-bv.ox);a5=bv.ocy-(at.mouseY-bv.oy);if(a7>bf-az/2){a7=bf-az/2}if(a7<az/2){a7=az/2}if(a5<aj/2){a5=aj/2}if(a5>aK-aj/2){a5=aK-aj/2}an=at.map(a7,0,bf,0,284);am=at.map(a5,0,aK,0,270);bv.$self.setMins()}}at.addMethod(bv,"mouseDragged",bJ,false);function br(){F=at.map(a7-az/2,0,bf,531.749,531.749+853);a9=at.map(a7+az/2,0,bf,531.749,531.749+853);D=at.map(a5-aj/2,0,aK,231.083,231.083+810);a6=at.map(a5+aj/2,0,aK,231.083,231.083+810)}at.addMethod(bv,"setMins",br,false);function bK(){bv.opressed=false}at.addMethod(bv,"mouseReleased",bK,false);function bD(){bv.opressed=false}at.addMethod(bv,"mouseOut",bD,false);function bt(){at.imageMode(at.CENTER);ad=-1;for(var bM=0;bM<aW.size();bM++){var bO=aW.get(bM);if(bO.x<a9+10&&bO.x>F-10&&bO.y<a6+15&&bO.y>D-15&&a3.get(bO.type).width>0){var bL=at.map(bO.x,F,a9,0,V);var bP=at.map(bO.y,D,a6,0,a4);if(at.mouseX<bL+15&&at.mouseX>bL-15&&at.mouseY<bP+15&&at.mouseY>bP-15&&(at.mouseX<ar||at.mouseX>w||at.mouseY<aq||at.mouseY>aw)){at.image(a3.get(bO.type),bL,bP);ad=bM}else{if(bi&&bO._id==bi._id){at.image(a3.get(bO.type),bL,bP);at.textSize(18);var bN=at.textWidth(bO.title);at.stroke(aN[bO.type]);at.fill(0);at.rectMode(at.CENTER);at.rect(bL,bP-40,bN+12,26,10);at.fill(aN[bO.type]);at.textAlign(at.LEFT,at.TOP);at.text(bO.title,bL-bN/2,bP-50)}else{at.image(a3.get(bO.type),bL,bP)}}}}}at.addMethod(bv,"drawLocations",bt,false);function bE(){if(A&&r.width>0){bm=true;if(!i){aX=at.map(at.mouseX,0,at.width,F,a9);aV=at.map(at.mouseY,0,at.height,D,a6);at.image(r,at.map(aX,F,a9,0,V),at.map(aV,D,a6,0,a4))}else{at.image(r,at.map(aX,F,a9,0,V),at.map(aV,D,a6,0,a4))}}}at.addMethod(bv,"drawCurrent",bE,false);function bw(){bu();bv.miniNYC=at.loadImage("/miniNYC.png");bv.ox=bv.oy=-1;bv.$self.prep()}function bF(){if(arguments.length===0){bw.apply(bv,arguments)}else{bu()}}bF.apply(null,arguments)}return bo})();at.Map=H;var O=(function(){function bo(){var bs=this;var bv={$upcast:bs};function bu(){l.apply(bv,arguments);if(!("$self" in bv)){at.extendClassChain(bv)}}bs.play=false;function bq(){return bs.play}at.addMethod(bs,"paused",bq,false);function by(){if(bv.pressed()){bs.invert=true;bs.pressedHere=true}}at.addMethod(bs,"mousePressed",by,false);function bw(){if(bv.pressed()&&bs.pressedHere){bs.invert=true}else{bs.invert=false}}at.addMethod(bs,"mouseDragged",bw,false);function bt(){if(bs.invert&&bs.pressedHere){if(aE&&q==au){song.togglePause()}else{if(q==bh){if(a8.getPlayerState()==2){a8.playVideo()}else{a8.pauseVideo()}}}bs.invert=false}bs.pressedHere=false}at.addMethod(bs,"mouseReleased",bt,false);function bp(){if(q==au&&aE){if(song!=null&&song.playState==1){if(song.paused){if(!R){bs.play=true}}else{bs.play=false}}else{bs.play=true}}else{if(q==bh){if(a8.getPlayerState()==2||a8.getPlayerState()==-1){if(!R){bs.play=true}}else{bs.play=false}}}}at.addMethod(bs,"update",bp,false);function bx(){if(bs.invert){at.fill(255);at.noStroke()}else{at.noFill();if(bv.pressed()){at.stroke(255)}else{at.noStroke()}}at.rect(bs.x-bs.hw,bs.y-bs.hh,bs.x+bs.hw,bs.y+bs.hh);if(bs.invert){at.fill(0);at.noStroke()}else{at.fill(255);at.noStroke()}if(bs.play){at.triangle(bs.x-bs.hw/2,bs.y-bs.hh/2,bs.x-bs.hw/2,bs.y+bs.hh/2,bs.x+bs.hw/2,bs.y)}else{at.rect(bs.x-bs.hw/2,bs.y-bs.hh/2,bs.x-1,bs.y+bs.hh/2);at.rect(bs.x+bs.hw/2,bs.y-bs.hh/2,bs.x+1,bs.y+bs.hh/2)}}at.addMethod(bs,"draw",bx,false);function bz(bB,bD,bA,bC){bu(bB,bD,bA,bC);bs.play=true}function br(){if(arguments.length===4){bz.apply(bs,arguments)}else{bu()}}br.apply(null,arguments)}at.extendStaticMembers(bo,l);bo.$base=l;return bo})();at.Play=O;var W=(function(){function bo(){var bq=this;var bt={$upcast:bq};function bs(){l.apply(bt,arguments);if(!("$self" in bt)){at.extendClassChain(bt)}}bq.invert=false;bq.pressed=false;function bw(){if(bt.pressed()){bq.invert=true;bq.pressedHere=true}}at.addMethod(bq,"mousePressed",bw,false);function bu(){if(bt.pressed()&&bq.pressedHere){bq.invert=true}else{bq.invert=false}}at.addMethod(bq,"mouseDragged",bu,false);function br(){if(bq.invert&&bq.pressedHere){bk();bq.invert=false}bq.pressedHere=false}at.addMethod(bq,"mouseReleased",br,false);function bv(){if(bq.invert){at.fill(255);at.noStroke()}else{if(bt.pressed()){at.textSize(14);var by=at.textWidth("Next Location");at.fill(0);at.stroke(255);at.rect(bq.x-by/2-3,bq.y+15,bq.x+by/2+3,bq.y+35);at.textAlign(at.CENTER,at.TOP);at.fill(255);at.text("Next Location",bq.x,bq.y+17);at.noFill()}else{at.noStroke();at.noFill()}}at.rect(bq.x-bq.hw,bq.y-bq.hh,bq.x+bq.hw,bq.y+bq.hh);if(bq.invert){at.fill(0);at.noStroke()}else{at.fill(255);at.noStroke()}at.rect(bq.x-3,bq.y-bq.hh/2,bq.x-6,bq.y+bq.hh/2);at.triangle(bq.x,bq.y-bq.hh/2,bq.x,bq.y+bq.hh/2,bq.x+bq.hw/2+1,bq.y)}at.addMethod(bq,"draw",bv,false);function bx(bz,bB,by,bA){bs(bz,bB,by,bA);bq.invert=false}function bp(){if(arguments.length===4){bx.apply(bq,arguments)}else{bs()}}bp.apply(null,arguments)}at.extendStaticMembers(bo,l);bo.$base=l;return bo})();at.Forward=W;var y=(function(){function bo(){var br=this;function bu(){at.extendClassChain(br)}br.panel=be;br.margin=10;br.slant=2;br.num=0;br.mouseMainPaneControl=-1;br.mouseSort=-1;br.mouseFilter=0;br.genreFilter=0;br.mouseOnTitle=0;br.mouseGenre=-1;br.colorIcon=null;br.sortIcon=null;br.names=[" Current Info"," Color Mode","Sorting"];br.currentColor=0;function bw(){br.$self.drawControl();if(!bi){br.$self.printNoSong()}else{br.$self.printLocation()}}at.addMethod(br,"draw",bw,false);function bx(){}at.addMethod(br,"mousePressed",bx,false);function bt(){}at.addMethod(br,"mouseReleased",bt,false);function by(){at.fill(0);at.strokeWeight(2);at.stroke(255);at.rectMode(at.CORNERS);at.rect(ar,aS,w+1,v);at.textSize(15);at.rectMode(at.CORNERS);at.noFill();at.rect(ar,aw,w+1,v)}at.addMethod(br,"drawControl",by,false);function bv(){at.textAlign(at.LEFT,at.TOP);at.textSize(22);at.fill(aN[bi.type]);j(bi.title,ar+10,aS+10,200,0,22);at.fill(255);at.textSize(16);k=-1;if(bi.list){var bA=bi.list.length;for(var bz=0;bz<bA;bz++){if(bz==P){at.fill(aN[bi.type]);j(bi.list[bz].title,ar+20,aS+35+bz*22,248,aN[bi.type],30);at.fill(255)}else{if(at.mouseX>ar+20&&at.mouseY<aS+35+(bz+1)*22&&at.mouseY>aS+35+bz*22){at.fill(aN[bi.type]);j(bi.list[bz].title,ar+20,aS+35+bz*22,248,aN[bi.type],30);k=bz;at.fill(255)}else{j(bi.list[bz].title,ar+20,aS+35+bz*22,248,at.color(255),30)}}}}else{at.text(bi.info,ar+20,aS+35,248,w-ar+20)}}at.addMethod(br,"printLocation",bv,false);function bs(){at.textAlign(at.LEFT);at.fill(255);at.textSize(16);at.text("Welcome to RapCities! Here you can explore how the sound of Hip-Hop and Rap changes from neighborhood to neighborhood in New York City!\n\nIf you find an artist you want to check out, just click on their icon, and you'll get to sample some of their most popular tunes.\n\n",ar+20,aS+35,w-ar-40,a4-aS)}at.addMethod(br,"printNoSong",bs,false);function bp(bA,bz){bu();ar=bA;aq=bz;M=57;aS=aq+M;w=V-aH;v=aq+555;aw=v+270;br.num=br.names.length;at.textSize(16)}function bq(){if(arguments.length===2){bp.apply(br,arguments)}else{bu()}}bq.apply(null,arguments)}return bo})();at.SidePane=y;var p=(function(){function bo(){var bt=this;function br(){at.extendClassChain(bt)}bt.play=null;bt.ffwd=null;bt.pressedInSeekBar=false;bt.onVol=false;bt.onVolGen=false;bt.volDragged=false;bt.songPausedToBeginWith=false;bt.stillWithinSeekBar=false;bt.totTime=null;bt.total=0;function bq(){if(q==bh||(q==au&&aE)){at.rectMode(at.CORNERS);bt.play.update();bt.play.draw();bt.ffwd.draw();bt.$self.drawSeekBar();bt.$self.drawVolume();if(bt.onVolGen){bt.$self.drawVolumeSetter()}at.rectMode(at.CENTER);at.ellipseMode(at.CENTER_RADIUS)}}at.addMethod(bt,"draw",bq,false);function bw(){bt.play.mousePressed();bt.ffwd.mousePressed();bt.$self.checkSeekBar();bt.$self.checkVol()}at.addMethod(bt,"mousePressed",bw,false);function bF(){bt.play.mouseDragged();bt.ffwd.mouseDragged();bt.$self.dragSeekBar();bt.$self.dragVol()}at.addMethod(bt,"mouseDragged",bF,false);function bG(){bt.play.mouseReleased();bt.ffwd.mouseReleased();bt.$self.releaseSeekBar();bt.$self.releaseVol()}at.addMethod(bt,"mouseReleased",bG,false);function bx(){if(at.mouseX>ay-10&&at.mouseX<ay+2&&at.mouseY>E-6&&at.mouseY<E+6){return true}return false}at.addMethod(bt,"onVolume",bx,false);function bH(){if(at.mouseX>ay-volS-10&&at.mouseX<ay+20&&at.mouseY>E-volY&&at.mouseY<E+volY){return true}return false}at.addMethod(bt,"onVolumeSetter",bH,false);function bp(){if(bt.$self.onVolume()){bt.onVol=true;at.stroke(255)}else{at.noStroke();bt.onVol=false}at.fill(255);at.triangle(ay-10,E,ay,E-7,ay,E+7);at.rect(ay-10,E+3,ay-3,E-3);at.stroke(255);at.strokeWeight(2);at.noFill();at.ellipseMode(at.RADIUS);if(!bj){if(ac>80){at.arc(ay+6,E,12,12,-(at.PI/3),at.PI/3)}if(ac>60){at.arc(ay+5,E,9,9,-(at.PI/3),at.PI/3)}if(ac>40){at.arc(ay+4,E,6,6,-(at.PI/3),at.PI/3)}if(ac>20){at.arc(ay+3,E,3,3,-(at.PI/3),at.PI/3)}}else{at.stroke(J[0]);at.line(ay-9,E-8,ay+2,E+7)}if(bt.$self.onVolumeSetter()){bt.onVolGen=true}else{if(!bt.volDragged){bt.onVolGen=false}}}at.addMethod(bt,"drawVolume",bp,false);function bB(){if(bt.onVol){bt.$self.toggleMute()}else{if(bt.onVolGen&&at.mouseX>ay-volS-5&&at.mouseX<ay-volS+5&&at.mouseY>E-volY&&at.mouseY<E+volY){bt.volDragged=true;ac=(E+volY-at.mouseY)/volD;if(q==au){song.setVolume(ac)}else{if(q==bh){a8.setVolume(ac)}}}}}at.addMethod(bt,"checkVol",bB,false);function bI(){if(bt.volDragged){if(at.mouseY>E+volY){ac=0}else{if(at.mouseY<E-volY){ac=100}else{ac=(E+volY-at.mouseY)/volD}}if(q==au){song.setVolume(ac)}else{if(q==bh){a8.setVolume(ac)}}}}at.addMethod(bt,"dragVol",bI,false);function bA(){if(bt.volDragged){bt.volDragged=false}}at.addMethod(bt,"releaseVol",bA,false);function bv(){at.stroke(255);at.strokeWeight(2);at.fill(0);at.rect(ay-volS-5,E-volY,ay-volS+5,E+volY);if(ac>0){at.fill(J[2]);at.noStroke();at.rect(ay-volS-4,E+volY-1,ay-volS+4,E+volY+1-ac*volD)}}at.addMethod(bt,"drawVolumeSetter",bv,false);function bs(){if(q==au&&aE){song.toggleMute()}else{if(q==bh){if(a8.isMuted()){a8.unMute()}else{a8.mute()}}}bj=!bj}at.addMethod(bt,"toggleMute",bs,false);function bC(){if((q==au&&aE)||q==bh){if(at.mouseX>bd&&at.mouseX<seekRight&&at.mouseY>E-10&&at.mouseY<E+10){R=true;bt.stillWithinSeekBar=true;if((q==au&&song.paused)||(q==bh&&a8.getPlayerState()==2)){bt.songPausedToBeginWith=true}else{bt.songPausedToBeginWith=false}if(q==au){song.pause()}else{a8.pauseVideo()}}}}at.addMethod(bt,"checkSeekBar",bC,false);function bE(){if(q==bh||(q==au&&aE)){if(R){if(at.mouseX>bd&&at.mouseX<seekRight&&at.mouseY>E-10&&at.mouseY<E+10){var bK=0;if(q==au){if(song!=null&&song.readyState==1){bK=song.durationEstimate}else{if(song!=null&&song.readyState==3){bK=song.duration}}var bJ=at.__int_cast(at.map(at.mouseX,bd,seekRight,0,bK));if(!bt.songPausedToBeginWith){song.resume()}song.setPosition(bJ)}else{var bJ=at.__int_cast(at.map(at.mouseX,bd,seekRight,0,a8.getDuration()));a8.seekTo(bJ,true);if(!bt.songPausedToBeginWith){a8.playVideo()}}}R=false;bt.stillWithinSeekBar=false;if(!bt.songPausedToBeginWith){if(q==au){song.resume()}else{a8.playVideo()}}}}}at.addMethod(bt,"releaseSeekBar",bE,false);function by(){if(q==bh||(q==au&&aE)){if(R){if(at.mouseX>bd&&at.mouseX<seekRight&&at.mouseY>E-10&&at.mouseY<E+10){bt.stillWithinSeekBar=true}else{bt.stillWithinSeekBar=false}}}}at.addMethod(bt,"dragSeekBar",by,false);function bz(){at.stroke(255);at.strokeWeight(3);if(q==bh&&a8.getPlayerState()==-1){at.fill(255);at.textSize(19);at.textAlign(at.LEFT,at.CENTER);at.text("-:--/-:--",aB-28-ao,E)}if((q==au&&song!=null&&song.readyState==1)||q==bh&&a8.getPlayerState()==3){at.strokeWeight(1);at.line(bd,E,seekRight,E);at.strokeWeight(3);var bJ=0;if(q==au){bJ=at.map(song.bytesLoaded,0,song.bytesTotal,bd,seekRight)}else{bJ=at.map(a8.getVideoBytesLoaded(),0,a8.getVideoBytesTotal(),bd,seekRight)}if(bJ>=0){at.line(bd,E,bJ,E)}}else{at.line(bd,E,seekRight,E)}if((q==au&&song!=null&&(song.readyState==1||song.readyState==3))||(q==bh&&a8.getPlayerState()>0)){var bK=null;if(!R||!bt.stillWithinSeekBar){var bJ=0;if(q==au){if(song.readyState==1){bt.total=song.durationEstimate;bt.totTime=a0(bt.total/1000)}else{if(song.readyState==3){bt.total=song.duration;bt.totTime=a0(bt.total/1000)}}bK=a0(song.position/1000);bJ=at.map(song.position,0,bt.total,bd,seekRight)}else{if(q==bh){bt.total=a8.getDuration();bt.totTime=a0(bt.total);bK=a0(a8.getCurrentTime());bJ=at.map(a8.getCurrentTime(),0,bt.total,bd,seekRight)}}if(bJ>=0){at.line(bJ,E-10,bJ,E+10)}}else{at.line(at.mouseX,E-10,at.mouseX,E+10);var bL=at.map(at.mouseX,bd,seekRight,0,bt.total);if(q==au){bL/=1000}bK=a0(bL)}at.fill(255);at.textSize(15);at.textAlign(at.LEFT,at.CENTER);at.text(bK+"/"+bt.totTime,aB-30-ao,E)}at.strokeWeight(1)}at.addMethod(bt,"drawSeekBar",bz,false);function bu(){br();aL=ar;aB=w;o=v-230;ba=v;ao=at.textWidth("0:00/0:00");bd=ar+95;E=v-18;bt.play=new O(ar+72,E,10,10);bt.ffwd=new W(w-20,E,10,10);ay=ar+40;volY=15;volD=0.3;volS=20;seekRight=w-40-ao;at.textSize(15)}function bD(){if(arguments.length===0){bu.apply(bt,arguments)}else{br()}}bD.apply(null,arguments)}return bo})();at.Current=p;var aE=false;var aI=null;var J=null;var n=null;var Q=null;var C=null;var ae=null;var m=null;var Z=null;var u="Kanye";var x=0;var aA=1;var f=2;var L=0;var d=1;var S=2;var bn=x;var N=false;var bg=S;var aT=0;var ap=null,ag=null;var aC=0;var B=1;var V=0,a4=0,h=0,I=0;var bf=0,aK=0;var aH=0,aG=0,e=0,bc=0;var aw=0;function aO(){V=at.max(700,$(window).width());a4=at.max(870,$(window).height());aJ();var bq=at.__split(window.location.pathname,(new at.Character("/")));if(bq.length>0&&bq[0]!="songid"){if(bq.length<3){sponsor=bq[1]}else{sponsor=bq[3]}}logo=at.loadImage("/logosign");$("#parent").css("width",V).css("height",a4);if(V==700||a4==870){$("body").css("overflow","visible")}e=1920;bc=1000;aH=20;aG=30;h=30;I=0;aK=5000;bf=5000;av();ak=new at.ArrayList();at.size(V,a4);at.frameRate(30);at.smooth();at.rectMode(at.CORNERS);at.ellipseMode(at.CENTER_RADIUS);aE=false;aI=at.createFont("Arial",13);at.textFont(aI);ax();songs=new at.ArrayList();C=new at.HashMap();m=new y(V-aH-284,aG);ae=new p();Z=new H();ap=new Array(4);ag=new Array(4);for(var bp=0;bp<4;bp++){ap[bp]=new Array(4);ag[bp]=new Array(4);for(var bo=0;bo<4;bo++){ag[bp][bo]=false}}}at.setup=aO;function b(bp,bo){if(bp!=V||bo!=a4){V=bp;a4=bo;$("#parent").css("width",bp).css("height",bo);h=30;I=0;at.size(V,a4);az=V;aj=a4;ar=V-aH-284;w=V-aH;aQ=at.map(az,0,bf,0,284);aP=at.map(aj,0,aK,0,270);Z.setMins();ay=ar+40;ae.play.newPos(ar+72,E);ae.ffwd.newPos(w-20,E);bd=ar+95;ay=ar+40;seekRight=w-40-ao;aL=ar;aB=w}}at.setUpSize=b;function ax(){at.colorMode(at.RGB);J=at.createJavaArray("$p.color",[10]);n=at.createJavaArray("$p.color",[10]);J[0]=at.color(255,0,0);J[1]=at.color(255,103,0);J[2]=at.color(255,182,0);J[3]=at.color(231,255,0);J[4]=at.color(0,255,18);J[5]=at.color(0,255,212);J[6]=at.color(0,104,155);J[7]=at.color(149,0,255);J[8]=at.color(248,0,255);J[9]=at.color(255,3,141);n[0]=at.color(0,153,153);n[1]=at.color(100,168,209);n[2]=at.color(133,133,232);n[3]=at.color(230,113,255);n[4]=at.color(255,128,157);n[5]=at.color(255,176,128);n[6]=at.color(255,195,100);n[7]=at.color(249,243,140);n[8]=at.color(222,244,130);n[9]=at.color(204,255,123)}at.setUpColors=ax;function aF(){Z.draw();at.imageMode(at.CORNER);at.image(logo,0,0);m.draw();ae.draw();if(ad>-1){bl(ad)}}at.draw=aF;var a3=new at.HashMap();var ab=[];var aN=[];var aW=new at.ArrayList();function aJ(){$.getJSON("/loc/browse?city="+u+"&hasLoc=8",function(bp){if(bp&&bp.locs){for(var bo=0;bo<bp.locs.length;bo++){aW.add(bp.locs[bo])}}});$.getJSON("/loc/getTypes",function(bp){if(bp&&bp.types){for(var bo=0;bo<bp.types.length;bo++){a3.put(bp.types[bo]._id,at.requestImage("/loc/getTypeIcon?_id="+bp.types[bo]._id));aN[bp.types[bo]._id]=at.color(bp.types[bo].r,bp.types[bo].g,bp.types[bo].b);ab[bp.types[bo]._id]=bp.types[bo].mediaType}}})}at.setUpLocations=aJ;var F=0,D=0,a9=0,a6=0;var az=0,aj=0,aQ=0,aP=0;var ad=-1;function aZ(bp,bo){var bq=null;if((bp==0)||(bp==1)||(bp==2&&bo<1)){bq="0";bq+=String(bp*4+bo+1)+"."+u+".grid"}else{bq=String(bp*4+bo+1)+"."+u+".grid"}ag[bp][bo]=true;ap[bp][bo]=at.requestImage("/"+bq)}at.loadMapPiece=aZ;function K(){Z.keyPressed()}at.keyPressed=K;var an=0,am=0,a7=0,a5=0;var r=null;var A=false;var bm=false;var af=null;var i=false;var aX=null,aV=null;var bi=null;var k=-1;var ad=-1;function z(){if(ad>=0){bi=aW.get(ad);console.log(bi);$("#curid").html(bi._id);P=0;s()}else{if(k>=0){P=k;s()}else{if(at.mouseX<ar||at.mouseX>w||at.mouseY<aq||at.mouseY>aw){if(at.mouseButton==at.LEFT){if(bm){if(i){$.ajax({url:"/loc/editLocation",data:{_id:af,x:aX+"",y:aV+"",city:u},success:function(bo){if(bo){if(bo.success&&bo.object){var bq=false;for(var bp=0;bp<aW.size();bp++){if(aW.get(bp)._id==af){aW.remove(bp);aW.add(bo.object);bq=true;break}}if(!bq){aW.add(bo.object)}var br="Operation Successful";if(bo.message){br+=(new at.Character("\n"))+bo.message}r=null;bm=false;i=false;A=false;alert(br)}else{alert("There seems to be an error:\n\n"+bo.message)}}}})}else{i=true}}else{af=document.input._id.value;if(af&&af.length>6){r=at.requestImage("/loc/getTypeIconID?city="+u+"&_id="+af);A=true}}}else{r=null;bm=false;i=false;A=false}}}}}at.mouseClicked=z;function bl(bo){var bq=aW.get(bo);at.textSize(18);var bp=at.textWidth(bq.title);at.stroke(aN[bq.type]);at.fill(0);at.rectMode(at.CORNERS);at.rect(at.mouseX,at.mouseY-33,at.mouseX+bp+12,at.mouseY-7,10);at.fill(aN[bq.type]);at.textAlign(at.LEFT,at.TOP);at.text(bq.title,at.mouseX+6,at.mouseY-30)}at.drawHoverInfo=bl;function a2(bo){$.getJSON("/getTrack?id="+bo,function(bp){if(aE){al()}bb(bp.url)})}at.getSong=a2;function bb(bo){song=soundManager.createSound({id:bo,url:bo,autoLoad:true,autoPlay:true,volume:ac,onfinish:function(){ai()}});aE=true;if(bj){song.mute()}}at.startSong=bb;function al(){aE=false;song.stop();song.unload();song.destruct()}at.stopSong=al;function aR(){if(at.mouseY<ba&&at.mouseY>o&&at.mouseX<aB&&at.mouseX>aL){ae.mousePressed()}else{if(at.mouseX>ar&&at.mouseX<w&&at.mouseY>aq&&at.mouseY<aw){if(at.mouseY<v){m.mousePressed()}else{Z.miniMousePressed()}}else{Z.mousePressed()}}}at.mousePressed=aR;function aM(){ae.mouseDragged();Z.mouseDragged();Z.miniMouseDragged()}at.mouseDragged=aM;function G(){Z.mouseOut();ae.mouseReleased()}at.mouseOut=G;function a(){ae.mouseReleased();Z.mouseReleased();Z.miniMouseReleased()}at.mouseReleased=a;var g=-1;var ah=1;var c=0;var U=true;function aU(){for(var bo=songs.size()-1;bo>-1;bo--){if(bo==Y&&aE){songs.get(bo).stopSong()}songs.remove(bo)}Y=-1;song=null}at.resetSongs=aU;function ai(){stopVideo();if(P<bi.list.length-1){P++;s()}else{bk()}}at.createNext=ai;var ak=null;function bk(){var bq=false;for(var bo=0;bo<ak.size();bo++){if(ak.get(bo)==bi._id){bq=true;break}}if(!bq){ak.add(bi._id)}for(var bo=0;bo<aW.size();bo++){var bp=aW.get(bo);if(bp.x>F&&bp.x<a9&&bp.y>D&&bp.y<a6&&!at.__contains(ak,bp._id)){bi=bp;P=0;s()}}}at.nextLocation=bk;function X(bp,bo){this.length=bp;this.index=bo}function j(br,bv,bt,bu,bo,by){if(at.textWidth(br)>bu){var bw=C.get(br+at.textWidth(br));if(bw==null){bw=new X(0,0);C.put(br+at.textWidth(br),bw)}var bq=bw.index;var bs=br.length;if(bw.length>=at.textWidth(br.charAt(bq))){if(bq<bs-1){bw.index++;bq++;bw.length=0}else{bw.index=bq=0;bw.length=-40}}var bx=at.textWidth(br.charAt(bq))-bw.length;bq++;while(bx<bu&&bq<bs){bx+=at.textWidth(br.charAt(bq));bq++}at.text(br.substring(bw.index,bq),bv-bw.length,bt);if(bq==bs){bx+=40;var bp=0;while(bx<bu){bx+=at.textWidth(br.charAt(bp));bp++}at.text(br.substring(0,bp),bv+at.textWidth(br.substring(bw.index,bq))-bw.length+40,bt)}at.noStroke();at.fill(0);at.rectMode(at.CORNERS);at.rect(bv-at.textWidth((new at.Character("W"))),bt+by,bv,bt);at.rect(bv+bu,bt,bv+bu+at.textWidth((new at.Character("W"))),bt+by);at.fill(bo);bw.length++;C.put(br+at.textWidth(br),bw)}else{at.text(br,bv,bt)}}at.checkText=j;var be=0;var t=1;var a1=0;var aq=0,ar=0,v=0,w=0,M=0,aS=0;var Y=-1;var P=-1;var R=false;var ac=50;var bj=false;var ao=0,bd=0,ay=0;var aB=0,aL=0,o=0,ba=0,E=0;function a0(bq){var bp=at.__int_cast((bq%60));var bo=at.__int_cast(((bq%3600)/60));var br=null;if(bp==0){br="00"}else{if(bp<10){br="0"+bp}else{br=bp}}return(bo+":"+br)}at.makeTime=a0;function T(){if(bi.list&&P<bi.list.length-1){P++;s()}else{bk()}}at.videoEnded=T;function av(){$("#ytplayer").html('<script type="text/javascript">var params = { allowScriptAccess: "always" };var atts = { id: "YouTubeP" };swfobject.embedSWF("http://www.youtube.com/apiplayer?enablejsapi=1&version=3", "ytplayer", "283", "200", "8", null, null, params, atts);<\/script>')}at.togglePlayer=av;var a8=null;var q=false;var au=1;var bh=2;function aD(){a8=document.getElementById("YouTubeP");q=bh;a8.setVolume(ac)}at.prepPlayer=aD;function s(){if(bi.list&&bi.list.length>0){a8.loadVideoById(bi.list[P].ytid)}else{if(bi.ytid){a8.loadVideoById(bi.ytid)}}}at.loadVideo=s;function aY(br,bp){var bs=null;if(br==bi._id){bs=false}else{bs=true}for(var bq=0;bq<aW.size();bq++){if(br==aW.get(bq)._id){bi=aW.get(bq);a7=at.map(bi.x,531.749,531.749+853,0,bf);a5=at.map(bi.y,231.083,231.083+810,0,aK);an=at.map(a7,0,bf,0,284);am=at.map(a5,0,aK,0,270);Z.setMins();if(bp&&bi.list){for(var bo=0;bo<bi.list.length;bo++){if(bi.list[bo].RID==bp){P=bo;s()}}}else{P=0;s()}}}}at.playVideo=aY;function aa(){$.getJSON("/getBio?id="+artist.RID,function(bo){if(bo!=null){$("div#biolog").html("<b>"+artist.name+"</b><br /><p>"+bo.text+'<br /><br />Source: <a href="'+bo.url+'">Wikipedia</a></p>');$("div#biolog",window.parent.document).scrollTop(0)}});if(!$("div#biolog").dialog("isOpen")){$("div#biolog").dialog("open")}}at.prepareBio=aa})
)});
</script>
	<script type="text/javascript">
		function onYouTubePlayerReady(playerId){	document.getElementById('YouTubeP').addEventListener("onStateChange","onytplayerStateChange");
		Processing.getInstanceById('canvas').prepPlayer();	
		}
		
		function onytplayerStateChange(newState) {
		   if(newState == 0){
			Processing.getInstanceById('canvas').videoEnded();
		   }
		}	
	</script>
  </head>
  <body bgcolor="Black">
    <div align=center>   
<form name="input"><font size="5" color="white">Location ID: <input type="text" name="_id" size="20"/> Cur Selected ID: <span id="curid"></span></font> </form>
     <canvas id="canvas">
      <font size="10" color="white">Your browser doesn't support HTML5! Please 
      and use the latest version of Mozilla Firefox or Google Chrome.</font>
    </canvas>
	<div id="dialogWindow">
		<div id="ytplayer">
			<p>Loading Site <br /> <br /> If it takes forever, you probably don't have Flash Player 8+ and/or JavaScript enabled.</p>

		</div>
	</div>
    </div>
  </body>
</html>
